40d1c34dcdf90a701651e0903fe479f3












'use strict';

var NativeAnimatedModule=require('NativeModules').NativeAnimatedModule;
var NativeEventEmitter=require('NativeEventEmitter');

var invariant=require('fbjs/lib/invariant');




var __nativeAnimatedNodeTagCount=1;
var __nativeAnimationIdCount=1;








var nativeEventEmitter=void 0;





var API={
createAnimatedNode:function createAnimatedNode(tag,config){
assertNativeAnimatedModule();
NativeAnimatedModule.createAnimatedNode(tag,config);
},
startListeningToAnimatedNodeValue:function startListeningToAnimatedNodeValue(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);
},
stopListeningToAnimatedNodeValue:function stopListeningToAnimatedNodeValue(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);
},
connectAnimatedNodes:function connectAnimatedNodes(parentTag,childTag){
assertNativeAnimatedModule();
NativeAnimatedModule.connectAnimatedNodes(parentTag,childTag);
},
disconnectAnimatedNodes:function disconnectAnimatedNodes(
parentTag,
childTag)
{
assertNativeAnimatedModule();
NativeAnimatedModule.disconnectAnimatedNodes(parentTag,childTag);
},
startAnimatingNode:function startAnimatingNode(
animationId,
nodeTag,
config,
endCallback)
{
assertNativeAnimatedModule();
NativeAnimatedModule.startAnimatingNode(
animationId,
nodeTag,
config,
endCallback);

},
stopAnimation:function stopAnimation(animationId){
assertNativeAnimatedModule();
NativeAnimatedModule.stopAnimation(animationId);
},
setAnimatedNodeValue:function setAnimatedNodeValue(nodeTag,value){
assertNativeAnimatedModule();
NativeAnimatedModule.setAnimatedNodeValue(nodeTag,value);
},
setAnimatedNodeOffset:function setAnimatedNodeOffset(nodeTag,offset){
assertNativeAnimatedModule();
NativeAnimatedModule.setAnimatedNodeOffset(nodeTag,offset);
},
flattenAnimatedNodeOffset:function flattenAnimatedNodeOffset(nodeTag){
assertNativeAnimatedModule();
NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);
},
extractAnimatedNodeOffset:function extractAnimatedNodeOffset(nodeTag){
assertNativeAnimatedModule();
NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);
},
connectAnimatedNodeToView:function connectAnimatedNodeToView(
nodeTag,
viewTag)
{
assertNativeAnimatedModule();
NativeAnimatedModule.connectAnimatedNodeToView(nodeTag,viewTag);
},
disconnectAnimatedNodeFromView:function disconnectAnimatedNodeFromView(
nodeTag,
viewTag)
{
assertNativeAnimatedModule();
NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag,viewTag);
},
dropAnimatedNode:function dropAnimatedNode(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.dropAnimatedNode(tag);
},
addAnimatedEventToView:function addAnimatedEventToView(
viewTag,
eventName,
eventMapping)
{
assertNativeAnimatedModule();
NativeAnimatedModule.addAnimatedEventToView(
viewTag,
eventName,
eventMapping);

},
removeAnimatedEventFromView:function removeAnimatedEventFromView(
viewTag,
eventName,
animatedNodeTag)
{
assertNativeAnimatedModule();
NativeAnimatedModule.removeAnimatedEventFromView(
viewTag,
eventName,
animatedNodeTag);

}};








var STYLES_WHITELIST={
opacity:true,
transform:true,

scaleX:true,
scaleY:true,
translateX:true,
translateY:true};


var TRANSFORM_WHITELIST={
translateX:true,
translateY:true,
scale:true,
scaleX:true,
scaleY:true,
rotate:true,
rotateX:true,
rotateY:true,
perspective:true};


function validateTransform(configs){
configs.forEach(function(config){
if(!TRANSFORM_WHITELIST.hasOwnProperty(config.property)){
throw new Error('Property \''+
config.property+'\' is not supported by native animated module');

}
});
}

function validateStyles(styles){
for(var key in styles){
if(!STYLES_WHITELIST.hasOwnProperty(key)){
throw new Error('Style property \''+
key+'\' is not supported by native animated module');

}
}
}

function validateInterpolation(config){
var SUPPORTED_INTERPOLATION_PARAMS={
inputRange:true,
outputRange:true,
extrapolate:true,
extrapolateRight:true,
extrapolateLeft:true};

for(var key in config){
if(!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(key)){
throw new Error('Interpolation property \''+
key+'\' is not supported by native animated module');

}
}
}

function generateNewNodeTag(){
return __nativeAnimatedNodeTagCount++;
}

function generateNewAnimationId(){
return __nativeAnimationIdCount++;
}

function assertNativeAnimatedModule(){
invariant(NativeAnimatedModule,'Native animated module is not available');
}

var _warnedMissingNativeAnimated=false;

function shouldUseNativeDriver(config){
if(config.useNativeDriver&&!NativeAnimatedModule){
if(!_warnedMissingNativeAnimated){
console.warn(
'Animated: `useNativeDriver` is not supported because the native '+
'animated module is missing. Falling back to JS-based animation. To '+
'resolve this, add `RCTAnimation` module to this app, or remove '+
'`useNativeDriver`. '+
'More info: https://github.com/facebook/react-native/issues/11094#issuecomment-263240420');

_warnedMissingNativeAnimated=true;
}
return false;
}

return config.useNativeDriver||false;
}

module.exports={
API:API,
validateStyles:validateStyles,
validateTransform:validateTransform,
validateInterpolation:validateInterpolation,
generateNewNodeTag:generateNewNodeTag,
generateNewAnimationId:generateNewAnimationId,
assertNativeAnimatedModule:assertNativeAnimatedModule,
shouldUseNativeDriver:shouldUseNativeDriver,
get nativeEventEmitter(){
if(!nativeEventEmitter){
nativeEventEmitter=new NativeEventEmitter(NativeAnimatedModule);
}
return nativeEventEmitter;
}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIl0sIm5hbWVzIjpbIk5hdGl2ZUFuaW1hdGVkTW9kdWxlIiwicmVxdWlyZSIsIk5hdGl2ZUV2ZW50RW1pdHRlciIsImludmFyaWFudCIsIl9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQiLCJfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJBUEkiLCJjcmVhdGVBbmltYXRlZE5vZGUiLCJ0YWciLCJjb25maWciLCJhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSIsInN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSIsInN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiY29ubmVjdEFuaW1hdGVkTm9kZXMiLCJwYXJlbnRUYWciLCJjaGlsZFRhZyIsImRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzIiwic3RhcnRBbmltYXRpbmdOb2RlIiwiYW5pbWF0aW9uSWQiLCJub2RlVGFnIiwiZW5kQ2FsbGJhY2siLCJzdG9wQW5pbWF0aW9uIiwic2V0QW5pbWF0ZWROb2RlVmFsdWUiLCJ2YWx1ZSIsInNldEFuaW1hdGVkTm9kZU9mZnNldCIsIm9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0IiwiY29ubmVjdEFuaW1hdGVkTm9kZVRvVmlldyIsInZpZXdUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXciLCJkcm9wQW5pbWF0ZWROb2RlIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImV2ZW50TmFtZSIsImV2ZW50TWFwcGluZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsIlNUWUxFU19XSElURUxJU1QiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwic2NhbGVYIiwic2NhbGVZIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJUUkFOU0ZPUk1fV0hJVEVMSVNUIiwic2NhbGUiLCJyb3RhdGUiLCJyb3RhdGVYIiwicm90YXRlWSIsInBlcnNwZWN0aXZlIiwidmFsaWRhdGVUcmFuc2Zvcm0iLCJjb25maWdzIiwiZm9yRWFjaCIsImhhc093blByb3BlcnR5IiwicHJvcGVydHkiLCJFcnJvciIsInZhbGlkYXRlU3R5bGVzIiwic3R5bGVzIiwia2V5IiwidmFsaWRhdGVJbnRlcnBvbGF0aW9uIiwiU1VQUE9SVEVEX0lOVEVSUE9MQVRJT05fUEFSQU1TIiwiaW5wdXRSYW5nZSIsIm91dHB1dFJhbmdlIiwiZXh0cmFwb2xhdGUiLCJleHRyYXBvbGF0ZVJpZ2h0IiwiZXh0cmFwb2xhdGVMZWZ0IiwiZ2VuZXJhdGVOZXdOb2RlVGFnIiwiZ2VuZXJhdGVOZXdBbmltYXRpb25JZCIsIl93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQiLCJzaG91bGRVc2VOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJjb25zb2xlIiwid2FybiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVlBOztBQUVBLEdBQU1BLHNCQUF1QkMsUUFBUSxlQUFSLEVBQXlCRCxvQkFBdEQ7QUFDQSxHQUFNRSxvQkFBcUJELFFBQVEsb0JBQVIsQ0FBM0I7O0FBRUEsR0FBTUUsV0FBWUYsUUFBUSxvQkFBUixDQUFsQjs7Ozs7QUFLQSxHQUFJRyw4QkFBK0IsQ0FBbkM7QUFDQSxHQUFJQywwQkFBMkIsQ0FBL0I7Ozs7Ozs7OztBQVNBLEdBQUlDLDBCQUFKOzs7Ozs7QUFNQSxHQUFNQyxLQUFNO0FBQ1ZDLG1CQUFvQiw0QkFBU0MsR0FBVCxDQUF1QkMsTUFBdkIsQ0FBNkM7QUFDL0RDO0FBQ0FYLHFCQUFxQlEsa0JBQXJCLENBQXdDQyxHQUF4QyxDQUE2Q0MsTUFBN0M7QUFDRCxDQUpTO0FBS1ZFLGtDQUFtQywyQ0FBU0gsR0FBVCxDQUF1QjtBQUN4REU7QUFDQVgscUJBQXFCWSxpQ0FBckIsQ0FBdURILEdBQXZEO0FBQ0QsQ0FSUztBQVNWSSxpQ0FBa0MsMENBQVNKLEdBQVQsQ0FBdUI7QUFDdkRFO0FBQ0FYLHFCQUFxQmEsZ0NBQXJCLENBQXNESixHQUF0RDtBQUNELENBWlM7QUFhVksscUJBQXNCLDhCQUFTQyxTQUFULENBQTZCQyxRQUE3QixDQUFzRDtBQUMxRUw7QUFDQVgscUJBQXFCYyxvQkFBckIsQ0FBMENDLFNBQTFDLENBQXFEQyxRQUFyRDtBQUNELENBaEJTO0FBaUJWQyx3QkFBeUI7QUFDdkJGLFNBRHVCO0FBRXZCQyxRQUZ1QjtBQUdqQjtBQUNOTDtBQUNBWCxxQkFBcUJpQix1QkFBckIsQ0FBNkNGLFNBQTdDLENBQXdEQyxRQUF4RDtBQUNELENBdkJTO0FBd0JWRSxtQkFBb0I7QUFDbEJDLFdBRGtCO0FBRWxCQyxPQUZrQjtBQUdsQlYsTUFIa0I7QUFJbEJXLFdBSmtCO0FBS1o7QUFDTlY7QUFDQVgscUJBQXFCa0Isa0JBQXJCO0FBQ0VDLFdBREY7QUFFRUMsT0FGRjtBQUdFVixNQUhGO0FBSUVXLFdBSkY7O0FBTUQsQ0FyQ1M7QUFzQ1ZDLGNBQWUsdUJBQVNILFdBQVQsQ0FBK0I7QUFDNUNSO0FBQ0FYLHFCQUFxQnNCLGFBQXJCLENBQW1DSCxXQUFuQztBQUNELENBekNTO0FBMENWSSxxQkFBc0IsOEJBQVNILE9BQVQsQ0FBMkJJLEtBQTNCLENBQWlEO0FBQ3JFYjtBQUNBWCxxQkFBcUJ1QixvQkFBckIsQ0FBMENILE9BQTFDLENBQW1ESSxLQUFuRDtBQUNELENBN0NTO0FBOENWQyxzQkFBdUIsK0JBQVNMLE9BQVQsQ0FBMkJNLE1BQTNCLENBQWtEO0FBQ3ZFZjtBQUNBWCxxQkFBcUJ5QixxQkFBckIsQ0FBMkNMLE9BQTNDLENBQW9ETSxNQUFwRDtBQUNELENBakRTO0FBa0RWQywwQkFBMkIsbUNBQVNQLE9BQVQsQ0FBaUM7QUFDMURUO0FBQ0FYLHFCQUFxQjJCLHlCQUFyQixDQUErQ1AsT0FBL0M7QUFDRCxDQXJEUztBQXNEVlEsMEJBQTJCLG1DQUFTUixPQUFULENBQWlDO0FBQzFEVDtBQUNBWCxxQkFBcUI0Qix5QkFBckIsQ0FBK0NSLE9BQS9DO0FBQ0QsQ0F6RFM7QUEwRFZTLDBCQUEyQjtBQUN6QlQsT0FEeUI7QUFFekJVLE9BRnlCO0FBR25CO0FBQ05uQjtBQUNBWCxxQkFBcUI2Qix5QkFBckIsQ0FBK0NULE9BQS9DLENBQXdEVSxPQUF4RDtBQUNELENBaEVTO0FBaUVWQywrQkFBZ0M7QUFDOUJYLE9BRDhCO0FBRTlCVSxPQUY4QjtBQUd4QjtBQUNObkI7QUFDQVgscUJBQXFCK0IsOEJBQXJCLENBQW9EWCxPQUFwRCxDQUE2RFUsT0FBN0Q7QUFDRCxDQXZFUztBQXdFVkUsaUJBQWtCLDBCQUFTdkIsR0FBVCxDQUE2QjtBQUM3Q0U7QUFDQVgscUJBQXFCZ0MsZ0JBQXJCLENBQXNDdkIsR0FBdEM7QUFDRCxDQTNFUztBQTRFVndCLHVCQUF3QjtBQUN0QkgsT0FEc0I7QUFFdEJJLFNBRnNCO0FBR3RCQyxZQUhzQjtBQUl0QjtBQUNBeEI7QUFDQVgscUJBQXFCaUMsc0JBQXJCO0FBQ0VILE9BREY7QUFFRUksU0FGRjtBQUdFQyxZQUhGOztBQUtELENBdkZTO0FBd0ZWQywyQkF4RlU7QUF5RlJOLE9BekZRO0FBMEZSSSxTQTFGUTtBQTJGUkcsZUEzRlE7QUE0RlI7QUFDQTFCO0FBQ0FYLHFCQUFxQm9DLDJCQUFyQjtBQUNFTixPQURGO0FBRUVJLFNBRkY7QUFHRUcsZUFIRjs7QUFLRCxDQW5HUyxDQUFaOzs7Ozs7Ozs7QUE0R0EsR0FBTUMsa0JBQW1CO0FBQ3ZCQyxRQUFTLElBRGM7QUFFdkJDLFVBQVcsSUFGWTs7QUFJdkJDLE9BQVEsSUFKZTtBQUt2QkMsT0FBUSxJQUxlO0FBTXZCQyxXQUFZLElBTlc7QUFPdkJDLFdBQVksSUFQVyxDQUF6Qjs7O0FBVUEsR0FBTUMscUJBQXNCO0FBQzFCRixXQUFZLElBRGM7QUFFMUJDLFdBQVksSUFGYztBQUcxQkUsTUFBTyxJQUhtQjtBQUkxQkwsT0FBUSxJQUprQjtBQUsxQkMsT0FBUSxJQUxrQjtBQU0xQkssT0FBUSxJQU5rQjtBQU8xQkMsUUFBUyxJQVBpQjtBQVExQkMsUUFBUyxJQVJpQjtBQVMxQkMsWUFBYSxJQVRhLENBQTVCOzs7QUFZQSxRQUFTQyxrQkFBVCxDQUEyQkMsT0FBM0IsQ0FBeUQ7QUFDdkRBLFFBQVFDLE9BQVIsQ0FBZ0IsZ0JBQVU7QUFDeEIsR0FBSSxDQUFDUixvQkFBb0JTLGNBQXBCLENBQW1DNUMsT0FBTzZDLFFBQTFDLENBQUwsQ0FBMEQ7QUFDeEQsS0FBTSxJQUFJQyxNQUFKO0FBQ1M5QyxPQUFPNkMsUUFEaEIsaURBQU47O0FBR0Q7QUFDRixDQU5EO0FBT0Q7O0FBRUQsUUFBU0UsZUFBVCxDQUF3QkMsTUFBeEIsQ0FBOEM7QUFDNUMsSUFBSyxHQUFJQyxJQUFULEdBQWdCRCxPQUFoQixDQUF3QjtBQUN0QixHQUFJLENBQUNwQixpQkFBaUJnQixjQUFqQixDQUFnQ0ssR0FBaEMsQ0FBTCxDQUEyQztBQUN6QyxLQUFNLElBQUlILE1BQUo7QUFDZUcsR0FEZixpREFBTjs7QUFHRDtBQUNGO0FBQ0Y7O0FBRUQsUUFBU0Msc0JBQVQsQ0FBK0JsRCxNQUEvQixDQUFxRDtBQUNuRCxHQUFJbUQsZ0NBQWlDO0FBQ25DQyxXQUFZLElBRHVCO0FBRW5DQyxZQUFhLElBRnNCO0FBR25DQyxZQUFhLElBSHNCO0FBSW5DQyxpQkFBa0IsSUFKaUI7QUFLbkNDLGdCQUFpQixJQUxrQixDQUFyQzs7QUFPQSxJQUFLLEdBQUlQLElBQVQsR0FBZ0JqRCxPQUFoQixDQUF3QjtBQUN0QixHQUFJLENBQUNtRCwrQkFBK0JQLGNBQS9CLENBQThDSyxHQUE5QyxDQUFMLENBQXlEO0FBQ3ZELEtBQU0sSUFBSUgsTUFBSjtBQUN1QkcsR0FEdkIsaURBQU47O0FBR0Q7QUFDRjtBQUNGOztBQUVELFFBQVNRLG1CQUFULEVBQXNDO0FBQ3BDLE1BQU8vRCwrQkFBUDtBQUNEOztBQUVELFFBQVNnRSx1QkFBVCxFQUEwQztBQUN4QyxNQUFPL0QsMkJBQVA7QUFDRDs7QUFFRCxRQUFTTSwyQkFBVCxFQUE0QztBQUMxQ1IsVUFBVUgsb0JBQVYsQ0FBZ0MseUNBQWhDO0FBQ0Q7O0FBRUQsR0FBSXFFLDhCQUErQixLQUFuQzs7QUFFQSxRQUFTQyxzQkFBVCxDQUErQjVELE1BQS9CLENBQStFO0FBQzdFLEdBQUlBLE9BQU82RCxlQUFQLEVBQTBCLENBQUN2RSxvQkFBL0IsQ0FBcUQ7QUFDbkQsR0FBSSxDQUFDcUUsNEJBQUwsQ0FBbUM7QUFDakNHLFFBQVFDLElBQVI7QUFDRTtBQUNFLHFFQURGO0FBRUUsaUVBRkY7QUFHRSxxQkFIRjtBQUlFLHlGQUxKOztBQU9BSiw2QkFBK0IsSUFBL0I7QUFDRDtBQUNELE1BQU8sTUFBUDtBQUNEOztBQUVELE1BQU8zRCxRQUFPNkQsZUFBUCxFQUEwQixLQUFqQztBQUNEOztBQUVERyxPQUFPQyxPQUFQLENBQWlCO0FBQ2ZwRSxPQURlO0FBRWZrRCw2QkFGZTtBQUdmTixtQ0FIZTtBQUlmUywyQ0FKZTtBQUtmTyxxQ0FMZTtBQU1mQyw2Q0FOZTtBQU9mekQscURBUGU7QUFRZjJELDJDQVJlO0FBU2YsR0FBSWhFLG1CQUFKLEVBQXlCO0FBQ3ZCLEdBQUksQ0FBQ0Esa0JBQUwsQ0FBeUI7QUFDdkJBLG1CQUFxQixHQUFJSixtQkFBSixDQUF1QkYsb0JBQXZCLENBQXJCO0FBQ0Q7QUFDRCxNQUFPTSxtQkFBUDtBQUNELENBZGMsQ0FBakIiLCJmaWxlIjoiTmF0aXZlQW5pbWF0ZWRIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIE5hdGl2ZUFuaW1hdGVkSGVscGVyXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IE5hdGl2ZUFuaW1hdGVkTW9kdWxlID0gcmVxdWlyZSgnTmF0aXZlTW9kdWxlcycpLk5hdGl2ZUFuaW1hdGVkTW9kdWxlO1xuY29uc3QgTmF0aXZlRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnTmF0aXZlRXZlbnRFbWl0dGVyJyk7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG5pbXBvcnQgdHlwZSB7QW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtFdmVudENvbmZpZ30gZnJvbSAnLi9BbmltYXRlZEV2ZW50JztcblxubGV0IF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQgPSAxOyAvKiB1c2VkIGZvciBhbmltYXRlZCBub2RlcyAqL1xubGV0IF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCA9IDE7IC8qIHVzZWQgZm9yIHN0YXJ0ZWQgYW5pbWF0aW9ucyAqL1xuXG50eXBlIEVuZFJlc3VsdCA9IHtmaW5pc2hlZDogYm9vbGVhbn07XG50eXBlIEVuZENhbGxiYWNrID0gKHJlc3VsdDogRW5kUmVzdWx0KSA9PiB2b2lkO1xudHlwZSBFdmVudE1hcHBpbmcgPSB7XG4gIG5hdGl2ZUV2ZW50UGF0aDogQXJyYXk8c3RyaW5nPixcbiAgYW5pbWF0ZWRWYWx1ZVRhZzogP251bWJlcixcbn07XG5cbmxldCBuYXRpdmVFdmVudEVtaXR0ZXI7XG5cbi8qKlxuICogU2ltcGxlIHdyYXBwZXJzIGFyb3VuZCBOYXRpdmVBbmltYXRlZE1vZHVsZSB0byBwcm92aWRlIGZsb3cgYW5kIGF1dG9jbXBsZXRlIHN1cHBvcnQgZm9yXG4gKiB0aGUgbmF0aXZlIG1vZHVsZSBtZXRob2RzXG4gKi9cbmNvbnN0IEFQSSA9IHtcbiAgY3JlYXRlQW5pbWF0ZWROb2RlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIsIGNvbmZpZzogT2JqZWN0KTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jcmVhdGVBbmltYXRlZE5vZGUodGFnLCBjb25maWcpO1xuICB9LFxuICBzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWU6IGZ1bmN0aW9uKHRhZzogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIpIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVzOiBmdW5jdGlvbihwYXJlbnRUYWc6ID9udW1iZXIsIGNoaWxkVGFnOiA/bnVtYmVyKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgfSxcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZXM6IGZ1bmN0aW9uKFxuICAgIHBhcmVudFRhZzogP251bWJlcixcbiAgICBjaGlsZFRhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgfSxcbiAgc3RhcnRBbmltYXRpbmdOb2RlOiBmdW5jdGlvbihcbiAgICBhbmltYXRpb25JZDogP251bWJlcixcbiAgICBub2RlVGFnOiA/bnVtYmVyLFxuICAgIGNvbmZpZzogT2JqZWN0LFxuICAgIGVuZENhbGxiYWNrOiBFbmRDYWxsYmFjayxcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5zdGFydEFuaW1hdGluZ05vZGUoXG4gICAgICBhbmltYXRpb25JZCxcbiAgICAgIG5vZGVUYWcsXG4gICAgICBjb25maWcsXG4gICAgICBlbmRDYWxsYmFjayxcbiAgICApO1xuICB9LFxuICBzdG9wQW5pbWF0aW9uOiBmdW5jdGlvbihhbmltYXRpb25JZDogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcEFuaW1hdGlvbihhbmltYXRpb25JZCk7XG4gIH0sXG4gIHNldEFuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbihub2RlVGFnOiA/bnVtYmVyLCB2YWx1ZTogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlVmFsdWUobm9kZVRhZywgdmFsdWUpO1xuICB9LFxuICBzZXRBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIsIG9mZnNldDogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcsIG9mZnNldCk7XG4gIH0sXG4gIGZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXc6IGZ1bmN0aW9uKFxuICAgIG5vZGVUYWc6ID9udW1iZXIsXG4gICAgdmlld1RhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KG5vZGVUYWcsIHZpZXdUYWcpO1xuICB9LFxuICBkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXc6IGZ1bmN0aW9uKFxuICAgIG5vZGVUYWc6ID9udW1iZXIsXG4gICAgdmlld1RhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXcobm9kZVRhZywgdmlld1RhZyk7XG4gIH0sXG4gIGRyb3BBbmltYXRlZE5vZGU6IGZ1bmN0aW9uKHRhZzogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZHJvcEFuaW1hdGVkTm9kZSh0YWcpO1xuICB9LFxuICBhZGRBbmltYXRlZEV2ZW50VG9WaWV3OiBmdW5jdGlvbihcbiAgICB2aWV3VGFnOiA/bnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGV2ZW50TWFwcGluZzogRXZlbnRNYXBwaW5nLFxuICApIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmFkZEFuaW1hdGVkRXZlbnRUb1ZpZXcoXG4gICAgICB2aWV3VGFnLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgZXZlbnRNYXBwaW5nLFxuICAgICk7XG4gIH0sXG4gIHJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyhcbiAgICB2aWV3VGFnOiA/bnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGFuaW1hdGVkTm9kZVRhZzogP251bWJlcixcbiAgKSB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5yZW1vdmVBbmltYXRlZEV2ZW50RnJvbVZpZXcoXG4gICAgICB2aWV3VGFnLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgYW5pbWF0ZWROb2RlVGFnLFxuICAgICk7XG4gIH0sXG59O1xuXG4vKipcbiAqIFN0eWxlcyBhbGxvd2VkIGJ5IHRoZSBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24uXG4gKlxuICogSW4gZ2VuZXJhbCBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24gc2hvdWxkIHN1cHBvcnQgYW55IG51bWVyaWMgcHJvcGVydHkgdGhhdCBkb2Vzbid0IG5lZWRcbiAqIHRvIGJlIHVwZGF0ZWQgdGhyb3VnaCB0aGUgc2hhZG93IHZpZXcgaGllcmFyY2h5IChhbGwgbm9uLWxheW91dCBwcm9wZXJ0aWVzKS5cbiAqL1xuY29uc3QgU1RZTEVTX1dISVRFTElTVCA9IHtcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgdHJhbnNmb3JtOiB0cnVlLFxuICAvKiBsZWdhY3kgYW5kcm9pZCB0cmFuc2Zvcm0gcHJvcGVydGllcyAqL1xuICBzY2FsZVg6IHRydWUsXG4gIHNjYWxlWTogdHJ1ZSxcbiAgdHJhbnNsYXRlWDogdHJ1ZSxcbiAgdHJhbnNsYXRlWTogdHJ1ZSxcbn07XG5cbmNvbnN0IFRSQU5TRk9STV9XSElURUxJU1QgPSB7XG4gIHRyYW5zbGF0ZVg6IHRydWUsXG4gIHRyYW5zbGF0ZVk6IHRydWUsXG4gIHNjYWxlOiB0cnVlLFxuICBzY2FsZVg6IHRydWUsXG4gIHNjYWxlWTogdHJ1ZSxcbiAgcm90YXRlOiB0cnVlLFxuICByb3RhdGVYOiB0cnVlLFxuICByb3RhdGVZOiB0cnVlLFxuICBwZXJzcGVjdGl2ZTogdHJ1ZSxcbn07XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVHJhbnNmb3JtKGNvbmZpZ3M6IEFycmF5PE9iamVjdD4pOiB2b2lkIHtcbiAgY29uZmlncy5mb3JFYWNoKGNvbmZpZyA9PiB7XG4gICAgaWYgKCFUUkFOU0ZPUk1fV0hJVEVMSVNULmhhc093blByb3BlcnR5KGNvbmZpZy5wcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFByb3BlcnR5ICcke2NvbmZpZy5wcm9wZXJ0eX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3R5bGVzKHN0eWxlczogT2JqZWN0KTogdm9pZCB7XG4gIGZvciAodmFyIGtleSBpbiBzdHlsZXMpIHtcbiAgICBpZiAoIVNUWUxFU19XSElURUxJU1QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU3R5bGUgcHJvcGVydHkgJyR7a2V5fScgaXMgbm90IHN1cHBvcnRlZCBieSBuYXRpdmUgYW5pbWF0ZWQgbW9kdWxlYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZXJwb2xhdGlvbihjb25maWc6IE9iamVjdCk6IHZvaWQge1xuICB2YXIgU1VQUE9SVEVEX0lOVEVSUE9MQVRJT05fUEFSQU1TID0ge1xuICAgIGlucHV0UmFuZ2U6IHRydWUsXG4gICAgb3V0cHV0UmFuZ2U6IHRydWUsXG4gICAgZXh0cmFwb2xhdGU6IHRydWUsXG4gICAgZXh0cmFwb2xhdGVSaWdodDogdHJ1ZSxcbiAgICBleHRyYXBvbGF0ZUxlZnQ6IHRydWUsXG4gIH07XG4gIGZvciAodmFyIGtleSBpbiBjb25maWcpIHtcbiAgICBpZiAoIVNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNUy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnRlcnBvbGF0aW9uIHByb3BlcnR5ICcke2tleX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5ld05vZGVUYWcoKTogbnVtYmVyIHtcbiAgcmV0dXJuIF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQrKztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdBbmltYXRpb25JZCgpOiBudW1iZXIge1xuICByZXR1cm4gX19uYXRpdmVBbmltYXRpb25JZENvdW50Kys7XG59XG5cbmZ1bmN0aW9uIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk6IHZvaWQge1xuICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbn1cblxubGV0IF93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlRHJpdmVyKGNvbmZpZzogQW5pbWF0aW9uQ29uZmlnIHwgRXZlbnRDb25maWcpOiBib29sZWFuIHtcbiAgaWYgKGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgJiYgIU5hdGl2ZUFuaW1hdGVkTW9kdWxlKSB7XG4gICAgaWYgKCFfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdBbmltYXRlZDogYHVzZU5hdGl2ZURyaXZlcmAgaXMgbm90IHN1cHBvcnRlZCBiZWNhdXNlIHRoZSBuYXRpdmUgJyArXG4gICAgICAgICAgJ2FuaW1hdGVkIG1vZHVsZSBpcyBtaXNzaW5nLiBGYWxsaW5nIGJhY2sgdG8gSlMtYmFzZWQgYW5pbWF0aW9uLiBUbyAnICtcbiAgICAgICAgICAncmVzb2x2ZSB0aGlzLCBhZGQgYFJDVEFuaW1hdGlvbmAgbW9kdWxlIHRvIHRoaXMgYXBwLCBvciByZW1vdmUgJyArXG4gICAgICAgICAgJ2B1c2VOYXRpdmVEcml2ZXJgLiAnICtcbiAgICAgICAgICAnTW9yZSBpbmZvOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL2lzc3Vlcy8xMTA5NCNpc3N1ZWNvbW1lbnQtMjYzMjQwNDIwJyxcbiAgICAgICk7XG4gICAgICBfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBUEksXG4gIHZhbGlkYXRlU3R5bGVzLFxuICB2YWxpZGF0ZVRyYW5zZm9ybSxcbiAgdmFsaWRhdGVJbnRlcnBvbGF0aW9uLFxuICBnZW5lcmF0ZU5ld05vZGVUYWcsXG4gIGdlbmVyYXRlTmV3QW5pbWF0aW9uSWQsXG4gIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlLFxuICBzaG91bGRVc2VOYXRpdmVEcml2ZXIsXG4gIGdldCBuYXRpdmVFdmVudEVtaXR0ZXIoKSB7XG4gICAgaWYgKCFuYXRpdmVFdmVudEVtaXR0ZXIpIHtcbiAgICAgIG5hdGl2ZUV2ZW50RW1pdHRlciA9IG5ldyBOYXRpdmVFdmVudEVtaXR0ZXIoTmF0aXZlQW5pbWF0ZWRNb2R1bGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmF0aXZlRXZlbnRFbWl0dGVyO1xuICB9LFxufTtcbiJdfQ==