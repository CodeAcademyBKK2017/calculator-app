7f09dddefeb441cf45bac25dc3a19752











'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};

var ColorPropType=require('ColorPropType');
var EdgeInsetsPropType=require('EdgeInsetsPropType');
var NativeMethodsMixin=require('NativeMethodsMixin');
var Platform=require('Platform');
var React=require('React');
var PropTypes=require('prop-types');
var ReactNativeViewAttributes=require('ReactNativeViewAttributes');
var StyleSheetPropType=require('StyleSheetPropType');
var TextStylePropTypes=require('TextStylePropTypes');
var Touchable=require('Touchable');

var createReactClass=require('create-react-class');
var createReactNativeComponentClass=require('createReactNativeComponentClass');
var mergeFast=require('mergeFast');
var processColor=require('processColor');

var stylePropType=StyleSheetPropType(TextStylePropTypes);

var viewConfig={
validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{
isHighlighted:true,
numberOfLines:true,
ellipsizeMode:true,
allowFontScaling:true,
disabled:true,
selectable:true,
selectionColor:true,
adjustsFontSizeToFit:true,
minimumFontScale:true,
textBreakStrategy:true}),

uiViewClassName:'RCTText'};


















































































































































































































































var Text=createReactClass({
displayName:'Text',
propTypes:{


















ellipsizeMode:PropTypes.oneOf(['head','middle','tail','clip']),







numberOfLines:PropTypes.number,





textBreakStrategy:PropTypes.oneOf(['simple','highQuality','balanced']),





onLayout:PropTypes.func,





onPress:PropTypes.func,





onLongPress:PropTypes.func,







pressRetentionOffset:EdgeInsetsPropType,



selectable:PropTypes.bool,




selectionColor:ColorPropType,





suppressHighlighting:PropTypes.bool,
style:stylePropType,



testID:PropTypes.string,



nativeID:PropTypes.string,




allowFontScaling:PropTypes.bool,








accessible:PropTypes.bool,




adjustsFontSizeToFit:PropTypes.bool,





minimumFontScale:PropTypes.number,




disabled:PropTypes.bool},

getDefaultProps:function getDefaultProps(){
return{
accessible:true,
allowFontScaling:true,
ellipsizeMode:'tail'};

},
getInitialState:function getInitialState(){
return mergeFast(Touchable.Mixin.touchableGetInitialState(),{
isHighlighted:false});

},
mixins:[NativeMethodsMixin],
viewConfig:viewConfig,
getChildContext:function getChildContext(){
return{isInAParentText:true};
},
childContextTypes:{
isInAParentText:PropTypes.bool},

contextTypes:{
isInAParentText:PropTypes.bool},




_handlers:null,
_hasPressHandler:function _hasPressHandler(){
return!!this.props.onPress||!!this.props.onLongPress;
},




touchableHandleActivePressIn:null,
touchableHandleActivePressOut:null,
touchableHandlePress:null,
touchableHandleLongPress:null,
touchableGetPressRectOffset:null,
render:function render(){var _this=this;
var newProps=this.props;
if(this.props.onStartShouldSetResponder||this._hasPressHandler()){
if(!this._handlers){
this._handlers={
onStartShouldSetResponder:function onStartShouldSetResponder(){
var shouldSetFromProps=_this.props.onStartShouldSetResponder&&

_this.props.onStartShouldSetResponder();
var setResponder=shouldSetFromProps||_this._hasPressHandler();
if(setResponder&&!_this.touchableHandleActivePressIn){


for(var key in Touchable.Mixin){
if(typeof Touchable.Mixin[key]==='function'){
_this[key]=Touchable.Mixin[key].bind(_this);
}
}
_this.touchableHandleActivePressIn=function(){
if(_this.props.suppressHighlighting||!_this._hasPressHandler()){
return;
}
_this.setState({
isHighlighted:true});

};

_this.touchableHandleActivePressOut=function(){
if(_this.props.suppressHighlighting||!_this._hasPressHandler()){
return;
}
_this.setState({
isHighlighted:false});

};

_this.touchableHandlePress=function(e){
_this.props.onPress&&_this.props.onPress(e);
};

_this.touchableHandleLongPress=function(e){
_this.props.onLongPress&&_this.props.onLongPress(e);
};

_this.touchableGetPressRectOffset=function(){
return this.props.pressRetentionOffset||PRESS_RECT_OFFSET;
};
}

return setResponder;
},
onResponderGrant:function(e,dispatchID){

this.touchableHandleResponderGrant(e,dispatchID);
this.props.onResponderGrant&&

this.props.onResponderGrant.apply(this,arguments);
}.bind(this),
onResponderMove:function(e){

this.touchableHandleResponderMove(e);
this.props.onResponderMove&&

this.props.onResponderMove.apply(this,arguments);
}.bind(this),
onResponderRelease:function(e){

this.touchableHandleResponderRelease(e);
this.props.onResponderRelease&&

this.props.onResponderRelease.apply(this,arguments);
}.bind(this),
onResponderTerminate:function(e){

this.touchableHandleResponderTerminate(e);
this.props.onResponderTerminate&&

this.props.onResponderTerminate.apply(this,arguments);
}.bind(this),
onResponderTerminationRequest:function(){



var allowTermination=this.touchableHandleResponderTerminationRequest();
if(allowTermination&&this.props.onResponderTerminationRequest){

allowTermination=this.props.onResponderTerminationRequest.apply(this,arguments);
}
return allowTermination;
}.bind(this)};

}
newProps=_extends({},
this.props,
this._handlers,{
isHighlighted:this.state.isHighlighted});

}
if(newProps.selectionColor!=null){
newProps=_extends({},
newProps,{
selectionColor:processColor(newProps.selectionColor)});

}
if(Touchable.TOUCH_TARGET_DEBUG&&newProps.onPress){
newProps=_extends({},
newProps,{
style:[this.props.style,{color:'magenta'}]});

}
if(this.context.isInAParentText){
return React.createElement(RCTVirtualText,newProps);
}else{
return React.createElement(RCTText,newProps);
}
}});









var PRESS_RECT_OFFSET={top:20,left:20,right:20,bottom:30};

var RCTText=createReactNativeComponentClass(
viewConfig.uiViewClassName,
function(){return viewConfig;});

var RCTVirtualText=RCTText;

if(Platform.OS==='android'){
RCTVirtualText=createReactNativeComponentClass('RCTVirtualText',function(){return{
validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{
isHighlighted:true}),

uiViewClassName:'RCTVirtualText'};});

}

module.exports=Text;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHQuanMiXSwibmFtZXMiOlsiQ29sb3JQcm9wVHlwZSIsInJlcXVpcmUiLCJFZGdlSW5zZXRzUHJvcFR5cGUiLCJOYXRpdmVNZXRob2RzTWl4aW4iLCJQbGF0Zm9ybSIsIlJlYWN0IiwiUHJvcFR5cGVzIiwiUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcyIsIlN0eWxlU2hlZXRQcm9wVHlwZSIsIlRleHRTdHlsZVByb3BUeXBlcyIsIlRvdWNoYWJsZSIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzIiwibWVyZ2VGYXN0IiwicHJvY2Vzc0NvbG9yIiwic3R5bGVQcm9wVHlwZSIsInZpZXdDb25maWciLCJ2YWxpZEF0dHJpYnV0ZXMiLCJVSVZpZXciLCJpc0hpZ2hsaWdodGVkIiwibnVtYmVyT2ZMaW5lcyIsImVsbGlwc2l6ZU1vZGUiLCJhbGxvd0ZvbnRTY2FsaW5nIiwiZGlzYWJsZWQiLCJzZWxlY3RhYmxlIiwic2VsZWN0aW9uQ29sb3IiLCJhZGp1c3RzRm9udFNpemVUb0ZpdCIsIm1pbmltdW1Gb250U2NhbGUiLCJ0ZXh0QnJlYWtTdHJhdGVneSIsInVpVmlld0NsYXNzTmFtZSIsIlRleHQiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsIm9uZU9mIiwibnVtYmVyIiwib25MYXlvdXQiLCJmdW5jIiwib25QcmVzcyIsIm9uTG9uZ1ByZXNzIiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJib29sIiwic3VwcHJlc3NIaWdobGlnaHRpbmciLCJzdHlsZSIsInRlc3RJRCIsInN0cmluZyIsIm5hdGl2ZUlEIiwiYWNjZXNzaWJsZSIsImdldERlZmF1bHRQcm9wcyIsImdldEluaXRpYWxTdGF0ZSIsIk1peGluIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwibWl4aW5zIiwiZ2V0Q2hpbGRDb250ZXh0IiwiaXNJbkFQYXJlbnRUZXh0IiwiY2hpbGRDb250ZXh0VHlwZXMiLCJjb250ZXh0VHlwZXMiLCJfaGFuZGxlcnMiLCJfaGFzUHJlc3NIYW5kbGVyIiwicHJvcHMiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInJlbmRlciIsIm5ld1Byb3BzIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInNob3VsZFNldEZyb21Qcm9wcyIsInNldFJlc3BvbmRlciIsImtleSIsImJpbmQiLCJzZXRTdGF0ZSIsImUiLCJQUkVTU19SRUNUX09GRlNFVCIsIm9uUmVzcG9uZGVyR3JhbnQiLCJkaXNwYXRjaElEIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsIm9uUmVzcG9uZGVyTW92ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJvblJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJUZXJtaW5hdGUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUiLCJvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsImFsbG93VGVybWluYXRpb24iLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJzdGF0ZSIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsImNvbG9yIiwiY29udGV4dCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsIlJDVFRleHQiLCJSQ1RWaXJ0dWFsVGV4dCIsIk9TIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFXQSxhOztBQUVBLEdBQU1BLGVBQWdCQyxRQUFRLGVBQVIsQ0FBdEI7QUFDQSxHQUFNQyxvQkFBcUJELFFBQVEsb0JBQVIsQ0FBM0I7QUFDQSxHQUFNRSxvQkFBcUJG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O0FBRUEsR0FBSUMsU0FBVXBGO0FBQ1pJLFdBQVdhLGVBREM7QUFFWixpQkFBTWIsV0FBTixFQUZZLENBQWQ7O0FBSUEsR0FBSWlGLGdCQUFpQkQsT0FBckI7O0FBRUEsR0FBSTVGLFNBQVM4RixFQUFULEdBQWdCLFNBQXBCLENBQStCO0FBQzdCRCxlQUFpQnJGLGdDQUFnQyxnQkFBaEMsQ0FBa0QsaUJBQU87QUFDeEVLLGdCQUFpQkosVUFBVU4sMEJBQTBCVyxNQUFwQyxDQUE0QztBQUMzREMsY0FBZSxJQUQ0QyxDQUE1QyxDQUR1RDs7QUFJeEVVLGdCQUFpQixnQkFKdUQsQ0FBUCxFQUFsRCxDQUFqQjs7QUFNRDs7QUFFRHNFLE9BQU9DLE9BQVAsQ0FBaUJ0RSxJQUFqQiIsImZpbGUiOiJUZXh0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBUZXh0XG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IENvbG9yUHJvcFR5cGUgPSByZXF1aXJlKCdDb2xvclByb3BUeXBlJyk7XG5jb25zdCBFZGdlSW5zZXRzUHJvcFR5cGUgPSByZXF1aXJlKCdFZGdlSW5zZXRzUHJvcFR5cGUnKTtcbmNvbnN0IE5hdGl2ZU1ldGhvZHNNaXhpbiA9IHJlcXVpcmUoJ05hdGl2ZU1ldGhvZHNNaXhpbicpO1xuY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKCdQbGF0Zm9ybScpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdSZWFjdCcpO1xuY29uc3QgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuY29uc3QgUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcyA9IHJlcXVpcmUoJ1JlYWN0TmF0aXZlVmlld0F0dHJpYnV0ZXMnKTtcbmNvbnN0IFN0eWxlU2hlZXRQcm9wVHlwZSA9IHJlcXVpcmUoJ1N0eWxlU2hlZXRQcm9wVHlwZScpO1xuY29uc3QgVGV4dFN0eWxlUHJvcFR5cGVzID0gcmVxdWlyZSgnVGV4dFN0eWxlUHJvcFR5cGVzJyk7XG5jb25zdCBUb3VjaGFibGUgPSByZXF1aXJlKCdUb3VjaGFibGUnKTtcblxuY29uc3QgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xuY29uc3QgY3JlYXRlUmVhY3ROYXRpdmVDb21wb25lbnRDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZVJlYWN0TmF0aXZlQ29tcG9uZW50Q2xhc3MnKTtcbmNvbnN0IG1lcmdlRmFzdCA9IHJlcXVpcmUoJ21lcmdlRmFzdCcpO1xuY29uc3QgcHJvY2Vzc0NvbG9yID0gcmVxdWlyZSgncHJvY2Vzc0NvbG9yJyk7XG5cbmNvbnN0IHN0eWxlUHJvcFR5cGUgPSBTdHlsZVNoZWV0UHJvcFR5cGUoVGV4dFN0eWxlUHJvcFR5cGVzKTtcblxuY29uc3Qgdmlld0NvbmZpZyA9IHtcbiAgdmFsaWRBdHRyaWJ1dGVzOiBtZXJnZUZhc3QoUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcy5VSVZpZXcsIHtcbiAgICBpc0hpZ2hsaWdodGVkOiB0cnVlLFxuICAgIG51bWJlck9mTGluZXM6IHRydWUsXG4gICAgZWxsaXBzaXplTW9kZTogdHJ1ZSxcbiAgICBhbGxvd0ZvbnRTY2FsaW5nOiB0cnVlLFxuICAgIGRpc2FibGVkOiB0cnVlLFxuICAgIHNlbGVjdGFibGU6IHRydWUsXG4gICAgc2VsZWN0aW9uQ29sb3I6IHRydWUsXG4gICAgYWRqdXN0c0ZvbnRTaXplVG9GaXQ6IHRydWUsXG4gICAgbWluaW11bUZvbnRTY2FsZTogdHJ1ZSxcbiAgICB0ZXh0QnJlYWtTdHJhdGVneTogdHJ1ZSxcbiAgfSksXG4gIHVpVmlld0NsYXNzTmFtZTogJ1JDVFRleHQnLFxufTtcblxuLyoqXG4gKiBBIFJlYWN0IGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyB0ZXh0LlxuICpcbiAqIGBUZXh0YCBzdXBwb3J0cyBuZXN0aW5nLCBzdHlsaW5nLCBhbmQgdG91Y2ggaGFuZGxpbmcuXG4gKlxuICogSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlLCB0aGUgbmVzdGVkIHRpdGxlIGFuZCBib2R5IHRleHQgd2lsbCBpbmhlcml0IHRoZVxuICogYGZvbnRGYW1pbHlgIGZyb20gYHN0eWxlcy5iYXNlVGV4dGAsIGJ1dCB0aGUgdGl0bGUgcHJvdmlkZXMgaXRzIG93blxuICogYWRkaXRpb25hbCBzdHlsZXMuICBUaGUgdGl0bGUgYW5kIGJvZHkgd2lsbCBzdGFjayBvbiB0b3Agb2YgZWFjaCBvdGhlciBvblxuICogYWNjb3VudCBvZiB0aGUgbGl0ZXJhbCBuZXdsaW5lczpcbiAqXG4gKiBgYGBSZWFjdE5hdGl2ZVdlYlBsYXllclxuICogaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEFwcFJlZ2lzdHJ5LCBUZXh0LCBTdHlsZVNoZWV0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0SW5BTmVzdCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpO1xuICogICAgIHRoaXMuc3RhdGUgPSB7XG4gKiAgICAgICB0aXRsZVRleHQ6IFwiQmlyZCdzIE5lc3RcIixcbiAqICAgICAgIGJvZHlUZXh0OiAnVGhpcyBpcyBub3QgcmVhbGx5IGEgYmlyZCBuZXN0LidcbiAqICAgICB9O1xuICogICB9XG4gKlxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMuYmFzZVRleHR9PlxuICogICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRpdGxlVGV4dH0gb25QcmVzcz17dGhpcy5vblByZXNzVGl0bGV9PlxuICogICAgICAgICAgIHt0aGlzLnN0YXRlLnRpdGxlVGV4dH17J1xcbid9eydcXG4nfVxuICogICAgICAgICA8L1RleHQ+XG4gKiAgICAgICAgIDxUZXh0IG51bWJlck9mTGluZXM9ezV9PlxuICogICAgICAgICAgIHt0aGlzLnN0YXRlLmJvZHlUZXh0fVxuICogICAgICAgICA8L1RleHQ+XG4gKiAgICAgICA8L1RleHQ+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAqICAgYmFzZVRleHQ6IHtcbiAqICAgICBmb250RmFtaWx5OiAnQ29jaGluJyxcbiAqICAgfSxcbiAqICAgdGl0bGVUZXh0OiB7XG4gKiAgICAgZm9udFNpemU6IDIwLFxuICogICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIC8vIHNraXAgdGhpcyBsaW5lIGlmIHVzaW5nIENyZWF0ZSBSZWFjdCBOYXRpdmUgQXBwXG4gKiBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudCgnVGV4dEluQU5lc3QnLCAoKSA9PiBUZXh0SW5BTmVzdCk7XG4gKiBgYGBcbiAqXG4gKiAjIyBOZXN0ZWQgdGV4dFxuICpcbiAqIEJvdGggaU9TIGFuZCBBbmRyb2lkIGFsbG93IHlvdSB0byBkaXNwbGF5IGZvcm1hdHRlZCB0ZXh0IGJ5IGFubm90YXRpbmdcbiAqIHJhbmdlcyBvZiBhIHN0cmluZyB3aXRoIHNwZWNpZmljIGZvcm1hdHRpbmcgbGlrZSBib2xkIG9yIGNvbG9yZWQgdGV4dFxuICogKGBOU0F0dHJpYnV0ZWRTdHJpbmdgIG9uIGlPUywgYFNwYW5uYWJsZVN0cmluZ2Agb24gQW5kcm9pZCkuIEluIHByYWN0aWNlLFxuICogdGhpcyBpcyB2ZXJ5IHRlZGlvdXMuIEZvciBSZWFjdCBOYXRpdmUsIHdlIGRlY2lkZWQgdG8gdXNlIHdlYiBwYXJhZGlnbSBmb3JcbiAqIHRoaXMgd2hlcmUgeW91IGNhbiBuZXN0IHRleHQgdG8gYWNoaWV2ZSB0aGUgc2FtZSBlZmZlY3QuXG4gKlxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgQXBwUmVnaXN0cnksIFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvbGRBbmRCZWF1dGlmdWwgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0IHN0eWxlPXt7Zm9udFdlaWdodDogJ2JvbGQnfX0+XG4gKiAgICAgICAgIEkgYW0gYm9sZFxuICogICAgICAgICA8VGV4dCBzdHlsZT17e2NvbG9yOiAncmVkJ319PlxuICogICAgICAgICAgIGFuZCByZWRcbiAqICAgICAgICAgPC9UZXh0PlxuICogICAgICAgPC9UZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0F3ZXNvbWVQcm9qZWN0JywgKCkgPT4gQm9sZEFuZEJlYXV0aWZ1bCk7XG4gKiBgYGBcbiAqXG4gKiBCZWhpbmQgdGhlIHNjZW5lcywgUmVhY3QgTmF0aXZlIGNvbnZlcnRzIHRoaXMgdG8gYSBmbGF0IGBOU0F0dHJpYnV0ZWRTdHJpbmdgXG4gKiBvciBgU3Bhbm5hYmxlU3RyaW5nYCB0aGF0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb246XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogXCJJIGFtIGJvbGQgYW5kIHJlZFwiXG4gKiAwLTk6IGJvbGRcbiAqIDktMTc6IGJvbGQsIHJlZFxuICogYGBgXG4gKlxuICogIyMgTmVzdGVkIHZpZXdzIChpT1Mgb25seSlcbiAqXG4gKiBPbiBpT1MsIHlvdSBjYW4gbmVzdCB2aWV3cyB3aXRoaW4geW91ciBUZXh0IGNvbXBvbmVudC4gSGVyZSdzIGFuIGV4YW1wbGU6XG4gKlxuICogYGBgUmVhY3ROYXRpdmVXZWJQbGF5ZXJcbiAqIGltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBBcHBSZWdpc3RyeSwgVGV4dCwgVmlldyB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmx1ZUlzQ29vbCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gKFxuICogICAgICAgPFRleHQ+XG4gKiAgICAgICAgIFRoZXJlIGlzIGEgYmx1ZSBzcXVhcmVcbiAqICAgICAgICAgPFZpZXcgc3R5bGU9e3t3aWR0aDogNTAsIGhlaWdodDogNTAsIGJhY2tncm91bmRDb2xvcjogJ3N0ZWVsYmx1ZSd9fSAvPlxuICogICAgICAgICBpbiBiZXR3ZWVuIG15IHRleHQuXG4gKiAgICAgICA8L1RleHQ+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIC8vIHNraXAgdGhpcyBsaW5lIGlmIHVzaW5nIENyZWF0ZSBSZWFjdCBOYXRpdmUgQXBwXG4gKiBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudCgnQXdlc29tZVByb2plY3QnLCAoKSA9PiBCbHVlSXNDb29sKTtcbiAqIGBgYFxuICpcbiAqID4gSW4gb3JkZXIgdG8gdXNlIHRoaXMgZmVhdHVyZSwgeW91IG11c3QgZ2l2ZSB0aGUgdmlldyBhIGB3aWR0aGAgYW5kIGEgYGhlaWdodGAuXG4gKlxuICogIyMgQ29udGFpbmVyc1xuICpcbiAqIFRoZSBgPFRleHQ+YCBlbGVtZW50IGlzIHNwZWNpYWwgcmVsYXRpdmUgdG8gbGF5b3V0OiBldmVyeXRoaW5nIGluc2lkZSBpcyBub1xuICogbG9uZ2VyIHVzaW5nIHRoZSBmbGV4Ym94IGxheW91dCBidXQgdXNpbmcgdGV4dCBsYXlvdXQuIFRoaXMgbWVhbnMgdGhhdFxuICogZWxlbWVudHMgaW5zaWRlIG9mIGEgYDxUZXh0PmAgYXJlIG5vIGxvbmdlciByZWN0YW5nbGVzLCBidXQgd3JhcCB3aGVuIHRoZXlcbiAqIHNlZSB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIDxUZXh0PlxuICogICA8VGV4dD5GaXJzdCBwYXJ0IGFuZCA8L1RleHQ+XG4gKiAgIDxUZXh0PnNlY29uZCBwYXJ0PC9UZXh0PlxuICogPC9UZXh0PlxuICogLy8gVGV4dCBjb250YWluZXI6IGFsbCB0aGUgdGV4dCBmbG93cyBhcyBpZiBpdCB3YXMgb25lXG4gKiAvLyB8Rmlyc3QgcGFydCB8XG4gKiAvLyB8YW5kIHNlY29uZCB8XG4gKiAvLyB8cGFydCAgICAgICB8XG4gKlxuICogPFZpZXc+XG4gKiAgIDxUZXh0PkZpcnN0IHBhcnQgYW5kIDwvVGV4dD5cbiAqICAgPFRleHQ+c2Vjb25kIHBhcnQ8L1RleHQ+XG4gKiA8L1ZpZXc+XG4gKiAvLyBWaWV3IGNvbnRhaW5lcjogZWFjaCB0ZXh0IGlzIGl0cyBvd24gYmxvY2tcbiAqIC8vIHxGaXJzdCBwYXJ0IHxcbiAqIC8vIHxhbmQgICAgICAgIHxcbiAqIC8vIHxzZWNvbmQgcGFydHxcbiAqIGBgYFxuICpcbiAqICMjIExpbWl0ZWQgU3R5bGUgSW5oZXJpdGFuY2VcbiAqXG4gKiBPbiB0aGUgd2ViLCB0aGUgdXN1YWwgd2F5IHRvIHNldCBhIGZvbnQgZmFtaWx5IGFuZCBzaXplIGZvciB0aGUgZW50aXJlXG4gKiBkb2N1bWVudCBpcyB0byB0YWtlIGFkdmFudGFnZSBvZiBpbmhlcml0ZWQgQ1NTIHByb3BlcnRpZXMgbGlrZSBzbzpcbiAqXG4gKiBgYGBjc3NcbiAqIGh0bWwge1xuICogICBmb250LWZhbWlseTogJ2x1Y2lkYSBncmFuZGUnLCB0YWhvbWEsIHZlcmRhbmEsIGFyaWFsLCBzYW5zLXNlcmlmO1xuICogICBmb250LXNpemU6IDExcHg7XG4gKiAgIGNvbG9yOiAjMTQxODIzO1xuICogfVxuICogYGBgXG4gKlxuICogQWxsIGVsZW1lbnRzIGluIHRoZSBkb2N1bWVudCB3aWxsIGluaGVyaXQgdGhpcyBmb250IHVubGVzcyB0aGV5IG9yIG9uZSBvZlxuICogdGhlaXIgcGFyZW50cyBzcGVjaWZpZXMgYSBuZXcgcnVsZS5cbiAqXG4gKiBJbiBSZWFjdCBOYXRpdmUsIHdlIGFyZSBtb3JlIHN0cmljdCBhYm91dCBpdDogKip5b3UgbXVzdCB3cmFwIGFsbCB0aGUgdGV4dFxuICogbm9kZXMgaW5zaWRlIG9mIGEgYDxUZXh0PmAgY29tcG9uZW50KiouIFlvdSBjYW5ub3QgaGF2ZSBhIHRleHQgbm9kZSBkaXJlY3RseVxuICogdW5kZXIgYSBgPFZpZXc+YC5cbiAqXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogLy8gQkFEOiB3aWxsIHJhaXNlIGV4Y2VwdGlvbiwgY2FuJ3QgaGF2ZSBhIHRleHQgbm9kZSBhcyBjaGlsZCBvZiBhIDxWaWV3PlxuICogPFZpZXc+XG4gKiAgIFNvbWUgdGV4dFxuICogPC9WaWV3PlxuICpcbiAqIC8vIEdPT0RcbiAqIDxWaWV3PlxuICogICA8VGV4dD5cbiAqICAgICBTb21lIHRleHRcbiAqICAgPC9UZXh0PlxuICogPC9WaWV3PlxuICogYGBgXG4gKlxuICogWW91IGFsc28gbG9zZSB0aGUgYWJpbGl0eSB0byBzZXQgdXAgYSBkZWZhdWx0IGZvbnQgZm9yIGFuIGVudGlyZSBzdWJ0cmVlLlxuICogVGhlIHJlY29tbWVuZGVkIHdheSB0byB1c2UgY29uc2lzdGVudCBmb250cyBhbmQgc2l6ZXMgYWNyb3NzIHlvdXJcbiAqIGFwcGxpY2F0aW9uIGlzIHRvIGNyZWF0ZSBhIGNvbXBvbmVudCBgTXlBcHBUZXh0YCB0aGF0IGluY2x1ZGVzIHRoZW0gYW5kIHVzZVxuICogdGhpcyBjb21wb25lbnQgYWNyb3NzIHlvdXIgYXBwLiBZb3UgY2FuIGFsc28gdXNlIHRoaXMgY29tcG9uZW50IHRvIG1ha2UgbW9yZVxuICogc3BlY2lmaWMgY29tcG9uZW50cyBsaWtlIGBNeUFwcEhlYWRlclRleHRgIGZvciBvdGhlciBraW5kcyBvZiB0ZXh0LlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIDxWaWV3PlxuICogICA8TXlBcHBUZXh0PlRleHQgc3R5bGVkIHdpdGggdGhlIGRlZmF1bHQgZm9udCBmb3IgdGhlIGVudGlyZSBhcHBsaWNhdGlvbjwvTXlBcHBUZXh0PlxuICogICA8TXlBcHBIZWFkZXJUZXh0PlRleHQgc3R5bGVkIGFzIGEgaGVhZGVyPC9NeUFwcEhlYWRlclRleHQ+XG4gKiA8L1ZpZXc+XG4gKiBgYGBcbiAqXG4gKiBBc3N1bWluZyB0aGF0IGBNeUFwcFRleHRgIGlzIGEgY29tcG9uZW50IHRoYXQgc2ltcGx5IHJlbmRlcnMgb3V0IGl0c1xuICogY2hpbGRyZW4gaW50byBhIGBUZXh0YCBjb21wb25lbnQgd2l0aCBzdHlsaW5nLCB0aGVuIGBNeUFwcEhlYWRlclRleHRgIGNhbiBiZVxuICogZGVmaW5lZCBhcyBmb2xsb3dzOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGNsYXNzIE15QXBwSGVhZGVyVGV4dCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICA8TXlBcHBUZXh0PlxuICogICAgICAgPFRleHQgc3R5bGU9e3tmb250U2l6ZTogMjB9fT5cbiAqICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gKiAgICAgICA8L1RleHQ+XG4gKiAgICAgPC9NeUFwcFRleHQ+XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIENvbXBvc2luZyBgTXlBcHBUZXh0YCBpbiB0aGlzIHdheSBlbnN1cmVzIHRoYXQgd2UgZ2V0IHRoZSBzdHlsZXMgZnJvbSBhXG4gKiB0b3AtbGV2ZWwgY29tcG9uZW50LCBidXQgbGVhdmVzIHVzIHRoZSBhYmlsaXR5IHRvIGFkZCAvIG92ZXJyaWRlIHRoZW0gaW5cbiAqIHNwZWNpZmljIHVzZSBjYXNlcy5cbiAqXG4gKiBSZWFjdCBOYXRpdmUgc3RpbGwgaGFzIHRoZSBjb25jZXB0IG9mIHN0eWxlIGluaGVyaXRhbmNlLCBidXQgbGltaXRlZCB0byB0ZXh0XG4gKiBzdWJ0cmVlcy4gSW4gdGhpcyBjYXNlLCB0aGUgc2Vjb25kIHBhcnQgd2lsbCBiZSBib3RoIGJvbGQgYW5kIHJlZC5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8VGV4dCBzdHlsZT17e2ZvbnRXZWlnaHQ6ICdib2xkJ319PlxuICogICBJIGFtIGJvbGRcbiAqICAgPFRleHQgc3R5bGU9e3tjb2xvcjogJ3JlZCd9fT5cbiAqICAgICBhbmQgcmVkXG4gKiAgIDwvVGV4dD5cbiAqIDwvVGV4dD5cbiAqIGBgYFxuICpcbiAqIFdlIGJlbGlldmUgdGhhdCB0aGlzIG1vcmUgY29uc3RyYWluZWQgd2F5IHRvIHN0eWxlIHRleHQgd2lsbCB5aWVsZCBiZXR0ZXJcbiAqIGFwcHM6XG4gKlxuICogLSAoRGV2ZWxvcGVyKSBSZWFjdCBjb21wb25lbnRzIGFyZSBkZXNpZ25lZCB3aXRoIHN0cm9uZyBpc29sYXRpb24gaW4gbWluZDpcbiAqIFlvdSBzaG91bGQgYmUgYWJsZSB0byBkcm9wIGEgY29tcG9uZW50IGFueXdoZXJlIGluIHlvdXIgYXBwbGljYXRpb24sXG4gKiB0cnVzdGluZyB0aGF0IGFzIGxvbmcgYXMgdGhlIHByb3BzIGFyZSB0aGUgc2FtZSwgaXQgd2lsbCBsb29rIGFuZCBiZWhhdmUgdGhlXG4gKiBzYW1lIHdheS4gVGV4dCBwcm9wZXJ0aWVzIHRoYXQgY291bGQgaW5oZXJpdCBmcm9tIG91dHNpZGUgb2YgdGhlIHByb3BzIHdvdWxkXG4gKiBicmVhayB0aGlzIGlzb2xhdGlvbi5cbiAqXG4gKiAtIChJbXBsZW1lbnRvcikgVGhlIGltcGxlbWVudGF0aW9uIG9mIFJlYWN0IE5hdGl2ZSBpcyBhbHNvIHNpbXBsaWZpZWQuIFdlIGRvXG4gKiBub3QgbmVlZCB0byBoYXZlIGEgYGZvbnRGYW1pbHlgIGZpZWxkIG9uIGV2ZXJ5IHNpbmdsZSBlbGVtZW50LCBhbmQgd2UgZG8gbm90XG4gKiBuZWVkIHRvIHBvdGVudGlhbGx5IHRyYXZlcnNlIHRoZSB0cmVlIHVwIHRvIHRoZSByb290IGV2ZXJ5IHRpbWUgd2UgZGlzcGxheSBhXG4gKiB0ZXh0IG5vZGUuIFRoZSBzdHlsZSBpbmhlcml0YW5jZSBpcyBvbmx5IGVuY29kZWQgaW5zaWRlIG9mIHRoZSBuYXRpdmUgVGV4dFxuICogY29tcG9uZW50IGFuZCBkb2Vzbid0IGxlYWsgdG8gb3RoZXIgY29tcG9uZW50cyBvciB0aGUgc3lzdGVtIGl0c2VsZi5cbiAqXG4gKi9cblxuY29uc3QgVGV4dCA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1RleHQnLFxuICBwcm9wVHlwZXM6IHtcbiAgICAvKipcbiAgICAgKiBXaGVuIGBudW1iZXJPZkxpbmVzYCBpcyBzZXQsIHRoaXMgcHJvcCBkZWZpbmVzIGhvdyB0ZXh0IHdpbGwgYmUgdHJ1bmNhdGVkLlxuICAgICAqIGBudW1iZXJPZkxpbmVzYCBtdXN0IGJlIHNldCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoaXMgcHJvcC5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYGhlYWRgIC0gVGhlIGxpbmUgaXMgZGlzcGxheWVkIHNvIHRoYXQgdGhlIGVuZCBmaXRzIGluIHRoZSBjb250YWluZXIgYW5kIHRoZSBtaXNzaW5nIHRleHRcbiAgICAgKiBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIGlzIGluZGljYXRlZCBieSBhbiBlbGxpcHNpcyBnbHlwaC4gZS5nLiwgXCIuLi53eHl6XCJcbiAgICAgKiAtIGBtaWRkbGVgIC0gVGhlIGxpbmUgaXMgZGlzcGxheWVkIHNvIHRoYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIGZpdCBpbiB0aGUgY29udGFpbmVyIGFuZCB0aGVcbiAgICAgKiBtaXNzaW5nIHRleHQgaW4gdGhlIG1pZGRsZSBpcyBpbmRpY2F0ZWQgYnkgYW4gZWxsaXBzaXMgZ2x5cGguIFwiYWIuLi55elwiXG4gICAgICogLSBgdGFpbGAgLSBUaGUgbGluZSBpcyBkaXNwbGF5ZWQgc28gdGhhdCB0aGUgYmVnaW5uaW5nIGZpdHMgaW4gdGhlIGNvbnRhaW5lciBhbmQgdGhlXG4gICAgICogbWlzc2luZyB0ZXh0IGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaW5kaWNhdGVkIGJ5IGFuIGVsbGlwc2lzIGdseXBoLiBlLmcuLCBcImFiY2QuLi5cIlxuICAgICAqIC0gYGNsaXBgIC0gTGluZXMgYXJlIG5vdCBkcmF3biBwYXN0IHRoZSBlZGdlIG9mIHRoZSB0ZXh0IGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGlzIGB0YWlsYC5cbiAgICAgKlxuICAgICAqID4gYGNsaXBgIGlzIHdvcmtpbmcgb25seSBmb3IgaU9TXG4gICAgICovXG4gICAgZWxsaXBzaXplTW9kZTogUHJvcFR5cGVzLm9uZU9mKFsnaGVhZCcsICdtaWRkbGUnLCAndGFpbCcsICdjbGlwJ10pLFxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gdHJ1bmNhdGUgdGhlIHRleHQgd2l0aCBhbiBlbGxpcHNpcyBhZnRlciBjb21wdXRpbmcgdGhlIHRleHRcbiAgICAgKiBsYXlvdXQsIGluY2x1ZGluZyBsaW5lIHdyYXBwaW5nLCBzdWNoIHRoYXQgdGhlIHRvdGFsIG51bWJlciBvZiBsaW5lc1xuICAgICAqIGRvZXMgbm90IGV4Y2VlZCB0aGlzIG51bWJlci5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcCBpcyBjb21tb25seSB1c2VkIHdpdGggYGVsbGlwc2l6ZU1vZGVgLlxuICAgICAqL1xuICAgIG51bWJlck9mTGluZXM6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgYnJlYWsgc3RyYXRlZ3kgb24gQW5kcm9pZCBBUEkgTGV2ZWwgMjMrLCBwb3NzaWJsZSB2YWx1ZXMgYXJlIGBzaW1wbGVgLCBgaGlnaFF1YWxpdHlgLCBgYmFsYW5jZWRgXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGhpZ2hRdWFsaXR5YC5cbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIHRleHRCcmVha1N0cmF0ZWd5OiBQcm9wVHlwZXMub25lT2YoWydzaW1wbGUnLCAnaGlnaFF1YWxpdHknLCAnYmFsYW5jZWQnXSksXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBtb3VudCBhbmQgbGF5b3V0IGNoYW5nZXMgd2l0aFxuICAgICAqXG4gICAgICogICBge25hdGl2ZUV2ZW50OiB7bGF5b3V0OiB7eCwgeSwgd2lkdGgsIGhlaWdodH19fWBcbiAgICAgKi9cbiAgICBvbkxheW91dDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gcHJlc3MuXG4gICAgICpcbiAgICAgKiBlLmcuLCBgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJzFzdCcpfWBcbiAgICAgKi9cbiAgICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBsb25nIHByZXNzLlxuICAgICAqXG4gICAgICogZS5nLiwgYG9uTG9uZ1ByZXNzPXt0aGlzLmluY3JlYXNlU2l6ZX0+YFxuICAgICAqL1xuICAgIG9uTG9uZ1ByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBzY3JvbGwgdmlldyBpcyBkaXNhYmxlZCwgdGhpcyBkZWZpbmVzIGhvdyBmYXIgeW91ciB0b3VjaCBtYXlcbiAgICAgKiBtb3ZlIG9mZiBvZiB0aGUgYnV0dG9uLCBiZWZvcmUgZGVhY3RpdmF0aW5nIHRoZSBidXR0b24uIE9uY2UgZGVhY3RpdmF0ZWQsXG4gICAgICogdHJ5IG1vdmluZyBpdCBiYWNrIGFuZCB5b3UnbGwgc2VlIHRoYXQgdGhlIGJ1dHRvbiBpcyBvbmNlIGFnYWluXG4gICAgICogcmVhY3RpdmF0ZWQhIE1vdmUgaXQgYmFjayBhbmQgZm9ydGggc2V2ZXJhbCB0aW1lcyB3aGlsZSB0aGUgc2Nyb2xsIHZpZXdcbiAgICAgKiBpcyBkaXNhYmxlZC4gRW5zdXJlIHlvdSBwYXNzIGluIGEgY29uc3RhbnQgdG8gcmVkdWNlIG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICAgKi9cbiAgICBwcmVzc1JldGVudGlvbk9mZnNldDogRWRnZUluc2V0c1Byb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIExldHMgdGhlIHVzZXIgc2VsZWN0IHRleHQsIHRvIHVzZSB0aGUgbmF0aXZlIGNvcHkgYW5kIHBhc3RlIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2VsZWN0YWJsZTogUHJvcFR5cGVzLmJvb2wsXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hsaWdodCBjb2xvciBvZiB0aGUgdGV4dC5cbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIHNlbGVjdGlvbkNvbG9yOiBDb2xvclByb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIFdoZW4gYHRydWVgLCBubyB2aXN1YWwgY2hhbmdlIGlzIG1hZGUgd2hlbiB0ZXh0IGlzIHByZXNzZWQgZG93bi4gQnlcbiAgICAgKiBkZWZhdWx0LCBhIGdyYXkgb3ZhbCBoaWdobGlnaHRzIHRoZSB0ZXh0IG9uIHByZXNzIGRvd24uXG4gICAgICogQHBsYXRmb3JtIGlvc1xuICAgICAqL1xuICAgIHN1cHByZXNzSGlnaGxpZ2h0aW5nOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzdHlsZTogc3R5bGVQcm9wVHlwZSxcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGxvY2F0ZSB0aGlzIHZpZXcgaW4gZW5kLXRvLWVuZCB0ZXN0cy5cbiAgICAgKi9cbiAgICB0ZXN0SUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBsb2NhdGUgdGhpcyB2aWV3IGZyb20gbmF0aXZlIGNvZGUuXG4gICAgICovXG4gICAgbmF0aXZlSUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgZm9udHMgc2hvdWxkIHNjYWxlIHRvIHJlc3BlY3QgVGV4dCBTaXplIGFjY2Vzc2liaWxpdHkgc2V0dGluZ3MuIFRoZVxuICAgICAqIGRlZmF1bHQgaXMgYHRydWVgLlxuICAgICAqL1xuICAgIGFsbG93Rm9udFNjYWxpbmc6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgaW5kaWNhdGVzIHRoYXQgdGhlIHZpZXcgaXMgYW4gYWNjZXNzaWJpbGl0eSBlbGVtZW50LiBUaGUgZGVmYXVsdCB2YWx1ZVxuICAgICAqIGZvciBhIGBUZXh0YCBlbGVtZW50IGlzIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGVcbiAgICAgKiBbQWNjZXNzaWJpbGl0eSBndWlkZV0oZG9jcy9hY2Nlc3NpYmlsaXR5Lmh0bWwjYWNjZXNzaWJsZS1pb3MtYW5kcm9pZClcbiAgICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBhY2Nlc3NpYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBmb250IHNob3VsZCBiZSBzY2FsZWQgZG93biBhdXRvbWF0aWNhbGx5IHRvIGZpdCBnaXZlbiBzdHlsZSBjb25zdHJhaW50cy5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgYWRqdXN0c0ZvbnRTaXplVG9GaXQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHNtYWxsZXN0IHBvc3NpYmxlIHNjYWxlIGEgZm9udCBjYW4gcmVhY2ggd2hlbiBhZGp1c3RzRm9udFNpemVUb0ZpdCBpcyBlbmFibGVkLiAodmFsdWVzIDAuMDEtMS4wKS5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgbWluaW11bUZvbnRTY2FsZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0ZXh0IHZpZXcgZm9yIHRlc3RpbmcgcHVycG9zZXNcbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzKCk6IE9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc2libGU6IHRydWUsXG4gICAgICBhbGxvd0ZvbnRTY2FsaW5nOiB0cnVlLFxuICAgICAgZWxsaXBzaXplTW9kZTogJ3RhaWwnLFxuICAgIH07XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKTogT2JqZWN0IHtcbiAgICByZXR1cm4gbWVyZ2VGYXN0KFRvdWNoYWJsZS5NaXhpbi50b3VjaGFibGVHZXRJbml0aWFsU3RhdGUoKSwge1xuICAgICAgaXNIaWdobGlnaHRlZDogZmFsc2UsXG4gICAgfSk7XG4gIH0sXG4gIG1peGluczogW05hdGl2ZU1ldGhvZHNNaXhpbl0sXG4gIHZpZXdDb25maWc6IHZpZXdDb25maWcsXG4gIGdldENoaWxkQ29udGV4dCgpOiBPYmplY3Qge1xuICAgIHJldHVybiB7aXNJbkFQYXJlbnRUZXh0OiB0cnVlfTtcbiAgfSxcbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBpc0luQVBhcmVudFRleHQ6IFByb3BUeXBlcy5ib29sXG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGlzSW5BUGFyZW50VGV4dDogUHJvcFR5cGVzLmJvb2xcbiAgfSxcbiAgLyoqXG4gICAqIE9ubHkgYXNzaWduZWQgaWYgdG91Y2ggaXMgbmVlZGVkLlxuICAgKi9cbiAgX2hhbmRsZXJzOiAobnVsbDogP09iamVjdCksXG4gIF9oYXNQcmVzc0hhbmRsZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5vblByZXNzIHx8ICEhdGhpcy5wcm9wcy5vbkxvbmdQcmVzcztcbiAgfSxcbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBhc3NpZ25lZCBsYXppbHkgdGhlIGZpcnN0IHRpbWUgdGhlIHJlc3BvbmRlciBpcyBzZXQgdG8gbWFrZSBwbGFpblxuICAgKiB0ZXh0IG5vZGVzIGFzIGNoZWFwIGFzIHBvc3NpYmxlLlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbjogKG51bGw6ID9GdW5jdGlvbiksXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiAobnVsbDogP0Z1bmN0aW9uKSxcbiAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IChudWxsOiA/RnVuY3Rpb24pLFxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IChudWxsOiA/RnVuY3Rpb24pLFxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IChudWxsOiA/RnVuY3Rpb24pLFxuICByZW5kZXIoKTogUmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICBsZXQgbmV3UHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGlmICh0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIgfHwgdGhpcy5faGFzUHJlc3NIYW5kbGVyKCkpIHtcbiAgICAgIGlmICghdGhpcy5faGFuZGxlcnMpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSB7XG4gICAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogKCk6IGJvb2wgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkU2V0RnJvbVByb3BzID0gdGhpcy5wcm9wcy5vblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyICYmXG4gICAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHNldFJlc3BvbmRlciA9IHNob3VsZFNldEZyb21Qcm9wcyB8fCB0aGlzLl9oYXNQcmVzc0hhbmRsZXIoKTtcbiAgICAgICAgICAgIGlmIChzZXRSZXNwb25kZXIgJiYgIXRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbikge1xuICAgICAgICAgICAgICAvLyBBdHRhY2ggYW5kIGJpbmQgYWxsIHRoZSBvdGhlciBoYW5kbGVycyBvbmx5IHRoZSBmaXJzdCB0aW1lIGEgdG91Y2hcbiAgICAgICAgICAgICAgLy8gYWN0dWFsbHkgaGFwcGVucy5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gVG91Y2hhYmxlLk1peGluKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBUb3VjaGFibGUuTWl4aW5ba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgKHRoaXM6IGFueSlba2V5XSA9IFRvdWNoYWJsZS5NaXhpbltrZXldLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zdXBwcmVzc0hpZ2hsaWdodGluZyB8fCAhdGhpcy5faGFzUHJlc3NIYW5kbGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuc3VwcHJlc3NIaWdobGlnaHRpbmcgfHwgIXRoaXMuX2hhc1ByZXNzSGFuZGxlcigpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgaXNIaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcyA9IChlOiBTeW50aGV0aWNFdmVudDw+KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyA9IChlOiBTeW50aGV0aWNFdmVudDw+KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyAmJiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzKGUpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0ID0gZnVuY3Rpb24oKTogUmVjdE9mZnNldCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJlc3NSZXRlbnRpb25PZmZzZXQgfHwgUFJFU1NfUkVDVF9PRkZTRVQ7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgcmV0dXJuIHNldFJlc3BvbmRlcjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ6IGZ1bmN0aW9uKGU6IFN5bnRoZXRpY0V2ZW50PD4sIGRpc3BhdGNoSUQ6IHN0cmluZykge1xuICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQoZSwgZGlzcGF0Y2hJRCk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyR3JhbnQgJiZcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlckdyYW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgIG9uUmVzcG9uZGVyTW92ZTogZnVuY3Rpb24oZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZShlKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJNb3ZlICYmXG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJNb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZTogZnVuY3Rpb24oZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZShlKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJSZWxlYXNlICYmXG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJSZWxlYXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlOiBmdW5jdGlvbihlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUoZSk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRlICYmXG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJUZXJtaW5hdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q6IGZ1bmN0aW9uKCk6IGJvb2wge1xuICAgICAgICAgICAgLy8gQWxsb3cgdG91Y2hhYmxlIG9yIHByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IHRvIGRlbnlcbiAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgdmFyIGFsbG93VGVybWluYXRpb24gPSB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCgpO1xuICAgICAgICAgICAgaWYgKGFsbG93VGVybWluYXRpb24gJiYgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCkge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgICBhbGxvd1Rlcm1pbmF0aW9uID0gdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFsbG93VGVybWluYXRpb247XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICAgIC4uLnRoaXMuX2hhbmRsZXJzLFxuICAgICAgICBpc0hpZ2hsaWdodGVkOiB0aGlzLnN0YXRlLmlzSGlnaGxpZ2h0ZWQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobmV3UHJvcHMuc2VsZWN0aW9uQ29sb3IgIT0gbnVsbCkge1xuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLm5ld1Byb3BzLFxuICAgICAgICBzZWxlY3Rpb25Db2xvcjogcHJvY2Vzc0NvbG9yKG5ld1Byb3BzLnNlbGVjdGlvbkNvbG9yKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKFRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcgJiYgbmV3UHJvcHMub25QcmVzcykge1xuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLm5ld1Byb3BzLFxuICAgICAgICBzdHlsZTogW3RoaXMucHJvcHMuc3R5bGUsIHtjb2xvcjogJ21hZ2VudGEnfV0sXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZXh0LmlzSW5BUGFyZW50VGV4dCkge1xuICAgICAgcmV0dXJuIDxSQ1RWaXJ0dWFsVGV4dCB7Li4ubmV3UHJvcHN9IC8+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gPFJDVFRleHQgey4uLm5ld1Byb3BzfSAvPjtcbiAgICB9XG4gIH0sXG59KTtcblxudHlwZSBSZWN0T2Zmc2V0ID0ge1xuICB0b3A6IG51bWJlcixcbiAgbGVmdDogbnVtYmVyLFxuICByaWdodDogbnVtYmVyLFxuICBib3R0b206IG51bWJlcixcbn1cblxudmFyIFBSRVNTX1JFQ1RfT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG52YXIgUkNUVGV4dCA9IGNyZWF0ZVJlYWN0TmF0aXZlQ29tcG9uZW50Q2xhc3MoXG4gIHZpZXdDb25maWcudWlWaWV3Q2xhc3NOYW1lLFxuICAoKSA9PiB2aWV3Q29uZmlnXG4pO1xudmFyIFJDVFZpcnR1YWxUZXh0ID0gUkNUVGV4dDtcblxuaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgUkNUVmlydHVhbFRleHQgPSBjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzKCdSQ1RWaXJ0dWFsVGV4dCcsICgpID0+ICh7XG4gICAgdmFsaWRBdHRyaWJ1dGVzOiBtZXJnZUZhc3QoUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcy5VSVZpZXcsIHtcbiAgICAgIGlzSGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgfSksXG4gICAgdWlWaWV3Q2xhc3NOYW1lOiAnUkNUVmlydHVhbFRleHQnLFxuICB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGV4dDtcbiJdfQ==